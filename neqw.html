<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Hangman - Ng∆∞·ªùi Treo C·ªï</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5; /* A slightly different gray for a fresh look */
        }
        .letter-box {
            border-bottom: 4px solid #4b5563; /* gray-600 */
            width: 40px;
            height: 50px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 2.25rem; /* 36px */
            font-weight: 700;
            margin: 0 4px;
            text-transform: uppercase;
            color: #1f2937; /* gray-800 */
            transition: all 0.3s ease;
        }
        .keyboard-btn {
            transition: all 0.2s ease;
            box-shadow: 0 4px #9ca3af; /* gray-400 */
        }
        .keyboard-btn:active {
            transform: translateY(2px);
            box-shadow: 0 2px #9ca3af;
        }
        .keyboard-btn.correct {
            background-color: #22c55e !important; /* green-500 */
            color: white;
            box-shadow: 0 4px #16a34a; /* green-600 */
        }
        .keyboard-btn.wrong {
            background-color: #ef4444 !important; /* red-500 */
            color: white;
            box-shadow: 0 4px #b91c1c; /* red-700 */
            cursor: not-allowed;
        }
        #hangman-canvas {
            width: 200px;
            height: 250px;
        }
         /* Modal styles */
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            z-index: 50;
        }
        .modal-backdrop.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        .modal-backdrop.show .modal-content {
            transform: scale(1);
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-4xl mx-auto bg-white p-6 rounded-2xl shadow-xl">
        <div class="grid md:grid-cols-2 gap-8 items-center">
            
            <!-- C·ªôt b√™n tr√°i: H√¨nh treo c·ªï -->
            <div class="flex flex-col items-center justify-center">
                <h1 class="text-3xl md:text-4xl font-extrabold text-gray-800 mb-4">Ng∆∞·ªùi Treo C·ªï</h1>
                <canvas id="hangman-canvas"></canvas>
            </div>

            <!-- C·ªôt b√™n ph·∫£i: Game play -->
            <div class="text-center">
                <!-- Khu v·ª±c g·ª£i √Ω -->
                <div class="bg-blue-100 border-t-4 border-blue-500 text-blue-800 p-4 rounded-b-lg shadow-md mb-6">
                    <p id="clue-text" class="text-lg font-medium">G·ª£i √Ω s·∫Ω xu·∫•t hi·ªán ·ªü ƒë√¢y.</p>
                </div>

                <!-- Khu v·ª±c hi·ªÉn th·ªã t·ª´ c·∫ßn ƒëo√°n -->
                <div id="word-container" class="flex justify-center flex-wrap items-center mb-6 min-h-[60px]">
                    <!-- C√°c √¥ ch·ªØ s·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                </div>
                
                <!-- B√†n ph√≠m ·∫£o -->
                <div id="keyboard-container" class="flex flex-wrap justify-center gap-2 max-w-md mx-auto">
                    <!-- C√°c n√∫t b√†n ph√≠m s·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal th√¥ng b√°o k·∫øt qu·∫£ -->
    <div id="result-modal" class="modal-backdrop">
        <div class="modal-content bg-white rounded-2xl shadow-2xl p-8 text-center w-11/12 max-w-md">
            <h2 id="modal-title" class="text-4xl font-bold mb-4">B·∫°n ƒë√£ th·∫Øng!</h2>
            <p id="modal-message" class="text-gray-600 text-lg mb-2">T·ª´ ƒë√∫ng l√†:</p>
            <p id="modal-word" class="text-3xl font-bold text-blue-600 tracking-widest mb-8"></p>
            <button id="play-again-button" class="w-full bg-blue-600 text-white font-bold text-lg px-8 py-4 rounded-lg hover:bg-blue-700 transition-all duration-200 transform hover:scale-105 shadow-md">
                Ch∆°i l·∫°i
            </button>
        </div>
    </div>

    <script>
        // --- DANH S√ÅCH T·ª™ V·ª∞NG ---
        const wordList = [
            { word: "APPLE", clue: "M·ªôt lo·∫°i tr√°i c√¢y m√†u ƒë·ªè ho·∫∑c xanh." },
            { word: "TIGER", clue: "Lo√†i m√®o l·ªõn c√≥ v·∫±n, l√† ch√∫a t·ªÉ s∆°n l√¢m." },
            { word: "OCEAN", clue: "V√πng n∆∞·ªõc m·∫∑n kh·ªïng l·ªì bao ph·ªß Tr√°i ƒê·∫•t." },
            { word: "GUITAR", clue: "Nh·∫°c c·ª• c√≥ s√°u d√¢y, d√πng ƒë·ªÉ ƒë·ªám h√°t." },
            { word: "PLANET", clue: "Thi√™n th·ªÉ l·ªõn quay quanh m·ªôt ng√¥i sao." },
            { word: "SCHOOL", clue: "N∆°i h·ªçc sinh ƒë·∫øn ƒë·ªÉ h·ªçc t·∫≠p." },
            { word: "SUMMER", clue: "M√πa n√≥ng nh·∫•t trong nƒÉm, c√≥ nhi·ªÅu k·ª≥ ngh·ªâ." },
            { word: "BICYCLE", clue: "Ph∆∞∆°ng ti·ªán hai b√°nh, di chuy·ªÉn b·∫±ng s·ª©c ng∆∞·ªùi." },
            { word: "COMPUTER", clue: "Thi·∫øt b·ªã ƒëi·ªán t·ª≠ d√πng ƒë·ªÉ x·ª≠ l√Ω th√¥ng tin." },
            { word: "LIBRARY", clue: "N∆°i ch·ª©a r·∫•t nhi·ªÅu s√°ch ƒë·ªÉ ƒë·ªçc v√† m∆∞·ª£n." }
        ];

        // --- C√ÄI ƒê·∫∂T GAME ---
        const MAX_WRONG_GUESSES = 6;
        const ALPHABET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';

        // --- L·∫§Y C√ÅC PH·∫¶N T·ª¨ HTML ---
        const clueText = document.getElementById('clue-text');
        const wordContainer = document.getElementById('word-container');
        const keyboardContainer = document.getElementById('keyboard-container');
        const canvas = document.getElementById('hangman-canvas');
        const ctx = canvas.getContext('2d');
        const resultModal = document.getElementById('result-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalWord = document.getElementById('modal-word');
        const playAgainButton = document.getElementById('play-again-button');

        // --- BI·∫æN TR·∫†NG TH√ÅI C·ª¶A GAME ---
        let currentWord = '';
        let currentClue = '';
        let guessedLetters = [];
        let wrongGuesses = 0;

        // --- C√ÅC H√ÄM V·∫º ---
        function drawHangmanPart(part) {
            ctx.strokeStyle = '#1f2937'; // gray-800
            ctx.lineWidth = 4;
            ctx.beginPath();

            switch (part) {
                case 1: // Gi√° treo (c·ªçc ƒë·ª©ng)
                    ctx.moveTo(40, 230);
                    ctx.lineTo(40, 20);
                    ctx.lineTo(120, 20);
                    ctx.lineTo(120, 50);
                    break;
                case 2: // ƒê·∫ßu
                    ctx.arc(120, 70, 20, 0, Math.PI * 2);
                    break;
                case 3: // Th√¢n
                    ctx.moveTo(120, 90);
                    ctx.lineTo(120, 160);
                    break;
                case 4: // Tay ph·∫£i
                    ctx.moveTo(120, 110);
                    ctx.lineTo(160, 130);
                    break;
                case 5: // Tay tr√°i
                    ctx.moveTo(120, 110);
                    ctx.lineTo(80, 130);
                    break;
                case 6: // Ch√¢n ph·∫£i
                    ctx.moveTo(120, 160);
                    ctx.lineTo(150, 200);
                    break;
                case 7: // Ch√¢n tr√°i
                    ctx.moveTo(120, 160);
                    ctx.lineTo(90, 200);
                    break;
            }
            ctx.stroke();
        }

        function drawGallows() {
            // Scale canvas for high-density displays
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#4b5563'; // gray-600
            ctx.lineWidth = 8;
            ctx.beginPath();
            ctx.moveTo(20, 230);
            ctx.lineTo(180, 230); // N·ªÅn ƒë·∫•t
            ctx.stroke();
        }
        
        // --- C√ÅC H√ÄM X·ª¨ L√ù GAME ---
        function newGame() {
            const { word, clue } = wordList[Math.floor(Math.random() * wordList.length)];
            currentWord = word;
            currentClue = clue;
            guessedLetters = [];
            wrongGuesses = 0;

            clueText.textContent = currentClue;
            drawGallows();
            renderWordDisplay();
            renderKeyboard();
            hideModal();
        }

        function renderWordDisplay() {
            wordContainer.innerHTML = '';
            currentWord.split('').forEach(letter => {
                const letterBox = document.createElement('div');
                letterBox.className = 'letter-box';
                letterBox.textContent = guessedLetters.includes(letter) ? letter : '';
                wordContainer.appendChild(letterBox);
            });
        }
        
        function renderKeyboard() {
            keyboardContainer.innerHTML = '';
            ALPHABET.split('').forEach(letter => {
                const btn = document.createElement('button');
                btn.textContent = letter;
                btn.className = 'keyboard-btn w-10 h-12 sm:w-12 sm:h-14 rounded-lg bg-gray-200 font-bold text-gray-700 text-lg';
                btn.onclick = () => handleGuess(letter);
                keyboardContainer.appendChild(btn);
            });
        }

        function handleGuess(letter) {
            if (guessedLetters.includes(letter) || wrongGuesses >= MAX_WRONG_GUESSES) return;

            guessedLetters.push(letter);
            const button = Array.from(keyboardContainer.children).find(btn => btn.textContent === letter);
            
            if (currentWord.includes(letter)) {
                button.classList.add('correct');
            } else {
                wrongGuesses++;
                button.classList.add('wrong');
                // V·∫Ω b·ªô ph·∫≠n t∆∞∆°ng ·ª©ng v·ªõi s·ªë l·∫ßn sai
                // Ch√∫ng ta v·∫Ω t·ª´ 1 ƒë·∫øn 6, nh∆∞ng ng∆∞·ªùi que c√≥ 7 b·ªô ph·∫≠n, n√™n s·∫Ω v·∫Ω 2 b·ªô ph·∫≠n cu·ªëi c√πng 1 l√∫c
                if (wrongGuesses <= 5) {
                    drawHangmanPart(wrongGuesses);
                } else if (wrongGuesses === 6) {
                    drawHangmanPart(6); // Ch√¢n ph·∫£i
                    drawHangmanPart(7); // Ch√¢n tr√°i
                }
            }
            
            button.disabled = true;
            renderWordDisplay();
            checkGameStatus();
        }
        
        function checkGameStatus() {
            const isWinner = currentWord.split('').every(letter => guessedLetters.includes(letter));
            
            if (isWinner) {
                setTimeout(() => showModal(true), 500);
            } else if (wrongGuesses >= MAX_WRONG_GUESSES) {
                setTimeout(() => showModal(false), 500);
            }
        }

        function showModal(isWin) {
            if (isWin) {
                modalTitle.textContent = 'üéâ B·∫°n ƒë√£ th·∫Øng! üéâ';
                modalTitle.className = 'text-4xl font-bold mb-4 text-green-500';
            } else {
                modalTitle.textContent = 'üò¢ Game Over üò¢';
                modalTitle.className = 'text-4xl font-bold mb-4 text-red-500';
            }
            modalWord.textContent = currentWord;
            resultModal.classList.add('show');
        }

        function hideModal() {
            resultModal.classList.remove('show');
        }

        // --- G√ÅN S·ª∞ KI·ªÜN ---
        playAgainButton.addEventListener('click', newGame);
        
        // --- B·∫ÆT ƒê·∫¶U GAME ---
        window.onload = newGame;
    </script>
</body>
</html>
